---
tags:
  - note
topic: AWK 基礎
home page: "[[Learning AWK]]"
---
讓我們進入 AWK 的基礎知識。

### AWK 的基本語法

AWK 的語法很簡潔，基本形式如下：

```shell
awk 'pattern { action }' input-file-names
```

這裡，`pattern` 表示一個條件表達式，用於選擇哪些行應該執行隨後的 `action` 動作。`action` 是一組在大括號 `{ }` 中的命令，用於對匹配的行進行處理。如果省略 `pattern`，則 `action` 會對所有輸入行執行。如果 `action` 也被省略，默認的動作是打印所有匹配的行。

### 執行 AWK 程序的方法

有幾種方法可以執行 AWK 程序：

1. **命令行直接執行：** 最簡單的方式，適合簡短的 AWK 程序。
   ```sh
   awk '{ print $0 }' filename
   ```
   這條命令會打印文件 `filename` 的所有內容，其中 `$0` 代表當前行的內容。

2. **將 AWK 程序保存到文件中：** 對於較長的 AWK 程序，可以將程序保存到一個文件中，然後使用 `-f` 選項執行。
   ```sh
   awk -f program.awk filename
   ```
   這裡，`program.awk` 是包含 AWK 程序的文件，`filename` 是輸入文件。

3. **結合 Shell 腳本：** AWK 經常與 Shell 腳本結合使用，以處理更複雜的文本處理任務。

### 簡單的打印命令

AWK 的打印命令 `print` 是最常用的動作之一，可以用來輸出文本。以下是一些基本的使用方法：

- **打印整行：**
  ```shell
  awk '{ print }' filename
  ```
  或者更明確地：
  ```shell
  awk '{ print $0 }' filename
  ```

- **打印行的特定字段：** 假設每行由空格分隔的多個字段組成，可以打印特定字段：
  ```shell
  awk '{ print $1 }' filename
  ```
  這會打印每一行的第一個字段。字段編號從1開始。

- **組合文本和字段：** 可以在 `print` 命令中結合使用文本和字段：
  ```shell
  awk '{ print "Field 1: " $1 }' filename
  ```

這些基礎知識將幫助你開始使用 AWK 進行簡單的文本處理任務。隨著課程的深入，我們會學習到更多的功能和技巧。

### `$0`,`$1`, ... ,`$NF` 的意義

在 AWK 中，`$0`、`$1`、`$2`等是用來訪問文本行中的字段的特殊變量。這裡的每個變量都有其特定的含義和用途：

- `$0` 表示當前處理的整行文本。
- `$1`、`$2`、`$3`... 分別表示第一個、第二個、第三個... 字段。字段的分割默認是基於空白字符（空格或制表符），但你可以通過設置內建變量 `FS`（Field Separator，字段分隔符）來改變這一行為。

除了這些，還有一些其他重要的內建變量，它們在 AWK 程式中頻繁使用：

- `NF`：表示當前行的字段數（Number of Fields）。比如，如果一行有3個字段，`NF` 的值就是3。這個變量經常用於循環或條件判斷中，比如打印每行的最後一個字段可以用 `print $NF`。
- `NR`：表示當前處理的是輸入文件的第幾行（Number of Records）。例如，處理文件的第10行時，`NR` 的值就是10。這個變量常用於處理特定行或範圍的行。
- `FS`：字段分隔符（Field Separator），用於定義字段的分隔方式。默認是空白字符，但可以被設置為其他字符，如逗號`,`，用於處理 CSV 文件。
- `OFS`：輸出字段分隔符（Output Field Separator），用於定義輸出時字段之間的分隔字符。默認也是空格，但同樣可以自定義。
- `RS`：記錄分隔符（Record Separator），默認情況下每行是一條記錄，但你可以修改這個變量來改變記錄的定義。
- `ORS`：輸出記錄分隔符（Output Record Separator），用於定義輸出記錄之間的分隔方式，默認是換行符。

這些變量使得 AWK 在處理文本文件時非常靈活和強大。通过結合使用這些變量，你可以對輸入的文本進行細致的處理和格式化輸出。