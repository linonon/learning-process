# Code Complete v2

- p57:
  - “迷信” 指的是你对代码的感觉代替对代码的理解。
  - 如果你不知道为什么它是有效的，那就研究并讨论它，或者用替代方案重新实现一次，直到你弄明白为止。
- p59:
  - 程序中参数个数的合理上限应该是七个左右。

## 5 高質量子程序特點

### 5.1  生成子程序的原因

1. 降低复杂性
2. 避免代码重复
3. 减少改动带来的影响
4. 隐含顺序： PopStack() 决定顺序
5. 方便改进性能
6. 集中控制
7. 隐藏数据结构
8. 隐藏操作指针
9. 隐藏全局变量： 鼓励思考数据是不是全局的
10. 提高可移植性
11. 分隔复杂操作
12. 方便测试简单

- 简单的程序也可以放到子程序中
  - 如  (x = a + (b/c), c != 0); 的实现

### 5.2 子程序名称恰当

- 强调过程： PrintReport(), CheckotDerInfo()
- 面向对象： Report.Print(), OrderInfo.Check()
- 强调返回值的名字：Cos(), PrinterReady(), CurrentTime(),

- 区分不同操作：
  - `Get`InputChar(): 将清除输入缓冲区
  - `Query`InputChar(): 不清除

### 5.3 强内聚性

单一职责原则的子程序更不容易出错

- 功能内聚：Sin(), GetXXName(), EraseFile()
- 顺序内聚： 比如文件操作：
  - 打开，读，逻辑操作，输出结果，关闭文件
    - 这时候拆开就没有意义
  - 如果命名困难，可以考虑改用`功能内聚`
- 通讯内聚： GetNameAndChangePhoneNumber(), 一定程度上可以接受
- 临时内聚： Startup(), Shutdown()，
  - 如 Startup(): 读配置文件，初始化临时文件，建立内存管理
    - 可以做几个子程序让Startup() 调用， 而不是自己完成。
